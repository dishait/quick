{"_path":"/vite/plugins/use-modules","_dir":"plugins","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"模块自动加载","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"模块自动加载"},"children":[{"type":"text","value":"模块自动加载"}]},{"type":"element","tag":"h2","props":{"id":"仓库"},"children":[{"type":"text","value":"仓库"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"模块自动加载插件 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" 包已实现，具体可见该仓库 👉 "},{"type":"element","tag":"a","props":{"href":"https://github.com/dishait/vite-plugin-use-modules","rel":["nofollow"]},"children":[{"type":"text","value":"vite-plugin-use-modules"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"space","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"原理"},"children":[{"type":"text","value":"原理"}]},{"type":"element","tag":"h3","props":{"id":"glob-导入"},"children":[{"type":"element","tag":"a","props":{"href":"https://cn.vitejs.dev/guide/features.html#glob-import","rel":["nofollow"]},"children":[{"type":"text","value":"Glob 导入"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vite"}]},{"type":"text","value":" 中有个非常好用的功能叫做 "},{"type":"element","tag":"a","props":{"href":"https://cn.vitejs.dev/guide/features.html#glob-import","rel":["nofollow"]},"children":[{"type":"text","value":"Glob 导入"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如你可以通过下边的方式自动引入 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src/modules"}]},{"type":"text","value":" 下的所有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"js"}]},{"type":"text","value":" 模块"}]},{"type":"element","tag":"code","props":{"code":"const modules = import.meta.globEager(\n    '/src/modules/**/*.js'\n)\n\nconsole.log(modules) // 将以对象的方式输出到前端控制台\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"globEager"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'/src/modules/**/*.js'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(modules) "}]},{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 将以对象的方式输出到前端控制台"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Glob 导入","src":"/img/globEager.gif"},"children":[]}]},{"type":"element","tag":"space","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"自动注册"},"children":[{"type":"text","value":"自动注册"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"根据上边的原理，我们就可以自动注册 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":" 模块"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如注册 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pinia"}]}]},{"type":"element","tag":"code","props":{"code":"npm i pinia -D\n","language":"shell","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"pinia"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"-D"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后创建模块 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src/modules/pinia.js"}]}]},{"type":"element","tag":"code","props":{"code":"// src/modules/pinia.js\nimport { createPinia } from 'pinia'\n\nexport default app => app.use(createPinia())\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// src/modules/pinia.js"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { createPinia } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'pinia'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" app "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"createPinia"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"())"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src/main.js"}]},{"type":"text","value":" 下书写以下代码"}]},{"type":"element","tag":"code","props":{"code":"import App from './App.vue'\nimport { createApp } from 'vue'\n\nconst app = createApp(App)\n\n// 引入所有模块\nconst modules = import.meta.globEager(\n    '/src/modules/**/*.js'\n)\n// 安装插件\nObject.values(modules).forEach(module => {\n    if (typeof module.default === 'function') {\n        module.default(app)\n    }\n})\n\napp.mount('#app')\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" App "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'./App.vue'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { createApp } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'vue'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"createApp"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(App)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 引入所有模块"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"meta"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"globEager"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'/src/modules/**/*.js'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 安装插件"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"Object."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"values"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(modules)."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":".default "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'function'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(app)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'#app'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以上就算自动注册 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pinia"}]},{"type":"text","value":" 成功了，可以创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src/stores/counter.js"}]},{"type":"text","value":" 验证一下"}]},{"type":"element","tag":"code","props":{"code":"// src/stores/counter.js\nimport { defineStore } from 'pinia'\n\nexport const useCounterStore = defineStore('counter', {\n    state() {\n        return {\n            counter: 0\n        }\n    },\n    actions: {\n        inc() {\n            this.counter++\n        }\n    }\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// src/stores/counter.js"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { defineStore } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'pinia'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"useCounterStore"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"defineStore"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'counter'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            counter: "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"0"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    actions: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"inc"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":".counter"}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"++"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后就可以在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src/App.vue"}]},{"type":"text","value":" 中使用了"}]},{"type":"element","tag":"code","props":{"code":"<script setup>\n    import { useCounterStore } from './stores/counter'\n\n    const store = useCounterStore()\n</script>\n\n<template>\n    <div @click=\"store.inc()\">{{ store.counter }}</div>\n</template>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-39f6e1"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { useCounterStore } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'./stores/counter'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"store"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"useCounterStore"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-39f6e1"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-39f6e1"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-39f6e1"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"\"store.inc()\""}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":">{{ store.counter }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-39f6e1"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-39f6e1"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"自动注册","src":"/img/autoUse.gif"},"children":[]}]},{"type":"element","tag":"space","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"虚拟模块"},"children":[{"type":"element","tag":"a","props":{"href":"https://cn.vitejs.dev/guide/api-plugin.html#importing-a-virtual-file","rel":["nofollow"]},"children":[{"type":"text","value":"虚拟模块"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们都知道 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vite"}]},{"type":"text","value":" 插件里有个非常好用的虚拟文件或者虚拟模块功能"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如我们可以创建一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"plugins/foo.js"}]},{"type":"text","value":" 插件"}]},{"type":"element","tag":"code","props":{"code":"// plugins/foo.js\n// 虚拟模块 id\nconst virtualModuleId = 'msg'\n// 处理之后的虚拟模块 id\nconst resolvedVirtualModuleId = '\\0' + virtualModuleId\n// 虚拟模块代码\nconst code = `export default 100`\n\nexport default {\n    name: 'foo',\n    resolveId(id) {\n        if (id === virtualModuleId) {\n            return resolvedVirtualModuleId\n        }\n    },\n    load(id) {\n        if (id === resolvedVirtualModuleId) {\n            return code\n        }\n    }\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// plugins/foo.js"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 虚拟模块 id"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"virtualModuleId"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'msg'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 处理之后的虚拟模块 id"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"resolvedVirtualModuleId"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"\\0"}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" virtualModuleId"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 虚拟模块代码"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"`export default 100`"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"name: "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'foo'"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"resolveId"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"(id) "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" (id "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" virtualModuleId) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" resolvedVirtualModuleId"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    }"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"(id) "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" (id "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" resolvedVirtualModuleId) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" code"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后我们需要注册该插件"}]},{"type":"element","tag":"code","props":{"code":"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport foo from './plugins/foo'\n\nexport default defineConfig({\n    plugins: [vue(), foo]\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { defineConfig } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'vite'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" vue "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'@vitejs/plugin-vue'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" foo "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'./plugins/foo'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"defineConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"plugins: ["}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"vue"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(), foo]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后就可以在前端里引入该虚拟模块了，例如 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"src/main.js"}]},{"type":"text","value":" 中"}]},{"type":"element","tag":"code","props":{"code":"// ...\nimport msg from 'msg'\n\nconsole.log(msg) // 将在前端控制台输出 100\n// ...\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" msg "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'msg'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(msg) "}]},{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// 将在前端控制台输出 100"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// ..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"虚拟模块","src":"/img/virtualModule.gif"},"children":[]}]},{"type":"element","tag":"space","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"实现"},"children":[{"type":"text","value":"实现"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"同理，我们也可以创建携带 "},{"type":"element","tag":"a","props":{"href":"https://cn.vitejs.dev/guide/features.html#glob-import","rel":["nofollow"]},"children":[{"type":"text","value":"Glob 导入"}]},{"type":"text","value":" 实现自动注册 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vue"}]},{"type":"text","value":" 模块的代码"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"plugins/use-modules.js"}]},{"type":"text","value":" 插件"}]},{"type":"element","tag":"code","props":{"code":"export default () => {\n    const virtualModuleId = 'virtual:modules'\n    const resolvedVirtualModuleId = '\\0' + virtualModuleId\n\n    const code = `\nexport const modules = import.meta.globEager(\n    '/src/modules/**/*.js'\n)\n\nexport const useModules = app => {\n    Object.values(modules).forEach(module => {\n        if (typeof module.default === 'function') {\n            module.default(app)\n        }\n    })\n}`\n\n    return {\n        name: 'vite-plugin-use-modules',\n        resolveId(id) {\n            if (id === virtualModuleId) {\n                return resolvedVirtualModuleId\n            }\n        },\n        load(id) {\n            if (id === resolvedVirtualModuleId) {\n                return code\n            }\n        }\n    }\n}\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"virtualModuleId"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'virtual:modules'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"resolvedVirtualModuleId"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"\\0"}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" virtualModuleId"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"code"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"export const modules = import.meta.globEager("}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"    '/src/modules/**/*.js'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"export const useModules = app => {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"    Object.values(modules).forEach(module => {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"        if (typeof module.default === 'function') {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"            module.default(app)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"    })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"}`"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        name: "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'vite-plugin-use-modules'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"resolveId"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" (id "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" virtualModuleId) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" resolvedVirtualModuleId"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        },"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" (id "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" resolvedVirtualModuleId) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"                "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" code"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"            }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后注册一下插件"}]},{"type":"element","tag":"code","props":{"code":"// vite.config.js\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport Modules from './plugins/use-modules'\n\nexport default defineConfig({\n    plugins: [vue(), Modules()]\n})\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0a156a"},"children":[{"type":"text","value":"// vite.config.js"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { defineConfig } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'vite'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" vue "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'@vitejs/plugin-vue'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" Modules "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'./plugins/use-modules'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"defineConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"plugins: ["}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"vue"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(), "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"Modules"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"()]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-fa4084"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最后就可以在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"main.js"}]},{"type":"text","value":" 中愉快的使用模块自动加载了"}]},{"type":"element","tag":"code","props":{"code":"import App from './App.vue'\nimport { createApp } from 'vue'\nimport { useModules } from 'virtual:modules'\n\nconst app = createApp(App)\n\nuseModules(app)\n\napp.mount('#app')\n","language":"js","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" App "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'./App.vue'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { createApp } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'vue'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" { useModules } "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'virtual:modules'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd84d"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d0e14"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"createApp"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(App)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"useModules"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"(app)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-f5d3de"},"children":[{"type":"text","value":"mount"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e8576c"},"children":[{"type":"text","value":"'#app'"}]},{"type":"element","tag":"span","props":{"class":"ct-9f43e7"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"实现","src":"/img/useModules.gif"},"children":[]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-39f6e1{color:#116329}\n.ct-fa4084{color:#953800}\n.ct-0a156a{color:#6E7781}\n.ct-e8576c{color:#0A3069}\n.ct-f5d3de{color:#8250DF}\n.ct-7fd84d{color:#0550AE}\n.ct-9f43e7{color:#24292F}\n.ct-4d0e14{color:#CF222E}\n.dark .ct-4d0e14{color:#FF7B72}\n.dark .ct-9f43e7{color:#C9D1D9}\n.dark .ct-7fd84d{color:#79C0FF}\n.dark .ct-f5d3de{color:#D2A8FF}\n.dark .ct-e8576c{color:#A5D6FF}\n.dark .ct-0a156a{color:#8B949E}\n.dark .ct-fa4084{color:#FFA657}\n.dark .ct-39f6e1{color:#7EE787}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"仓库","depth":2,"text":"仓库"},{"id":"原理","depth":2,"text":"原理","children":[{"id":"glob-导入","depth":3,"text":"Glob 导入"},{"id":"自动注册","depth":3,"text":"自动注册"},{"id":"虚拟模块","depth":3,"text":"虚拟模块"}]},{"id":"实现","depth":2,"text":"实现"}]}},"_type":"markdown","_id":"content:vite:1.plugins:2.use-modules.md","_source":"content","_file":"vite/1.plugins/2.use-modules.md","_extension":"md"}