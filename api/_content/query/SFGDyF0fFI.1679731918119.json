{"_path":"/nuxt3/features/data-fetch","_dir":"features","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"数据获取","description":"","sidebarDepth":1,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"数据获取"},"children":[{"type":"text","value":"数据获取"}]},{"type":"element","tag":"iframe-video","props":{"aid":"895373074","bvid":"BV1hP4y1K7pN","cid":"565584536"},"children":[]},{"type":"element","tag":"h2","props":{"id":"基础"},"children":[{"type":"text","value":"基础"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt3"}]},{"type":"text","value":" 中内置了以下四种请求的方法"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\n// 参数一是 key\n// 参数二是请求 handler，返回请求的 promise\n// 解构出来的 data 为数据，error 为错误信息\nconst { data, error } = await useAsyncData('count', () => {\n    return new Promise(resolve => resolve('mock'))\n})\n</script>\n\n<template>\n    <div>\n        <div>data: {{ data }}</div>\n        <div>error: {{ error }}</div>\n    </div>\n</template>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 参数一是 key"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 参数二是请求 handler，返回请求的 promise"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 解构出来的 data 为数据，error 为错误信息"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"Promise"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e9f46c"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'mock'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"))"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">data: {{ data }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">error: {{ error }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内置的  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 可以直接进行请求"}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\nconst { data, error } = await useAsyncData('count', () => {\n    return $fetch('http://...') // 请求地址\n})\n</script>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'count'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"$fetch"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'http://...'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 请求地址"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当然你可以用更简洁的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"，它会在内部自动生成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\nconst { data, error } = await useFetch('http://...') // 你的请求地址\n</script>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'http://...'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 你的请求地址"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 会在内部自动使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 作为请求方法，所以没有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" 灵活。"}]},{"type":"element","tag":"space","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"lazy"},"children":[{"type":"text","value":"lazy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" 会阻塞导航的跳转。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":" 页面跳转到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"home"}]},{"type":"text","value":" 页面"}]},{"type":"element","tag":"code","props":{"code":"<template>\n    <NuxtLink to=\"/home\"> to home</NuxtLink>\n</template>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-47aed4"},"children":[{"type":"text","value":"NuxtLink"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"/home\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"> to home</"}]},{"type":"element","tag":"span","props":{"class":"ct-47aed4"},"children":[{"type":"text","value":"NuxtLink"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"home"}]},{"type":"text","value":" 页面有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 请求"}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n// 以下请求将会阻塞导航的跳转\nconst { data } = await useFetch('http://localhost:4000')\n</script>\n\n<template>\n    <div>{{ data }}</div>\n</template>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"<!-- pages/home.vue -->"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 以下请求将会阻塞导航的跳转"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'http://localhost:4000'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">{{ data }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而使用对应的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lazy"}]},{"type":"text","value":" 模式，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":" 可以让导航跳转不被阻塞"}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n// 使用 useFetch 的 lazy 模式，不会阻塞导航跳转\nconst { data } = await useLazyFetch('http://localhost:4000')\n</script>\n\n<template>\n    <div>{{ data }}</div>\n</template>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"<!-- pages/home.vue -->"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 使用 useFetch 的 lazy 模式，不会阻塞导航跳转"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'http://localhost:4000'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">{{ data }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"space","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"注意"},"children":[{"type":"text","value":"注意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt3"}]},{"type":"text","value":" 默认是全 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SSR"}]},{"type":"text","value":" 的渲染模式，所以相同的业务代码会在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node"}]},{"type":"text","value":" 和浏览器都跑一遍。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这意味着大多数 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"仅支持浏览器的请求库"}]},{"type":"text","value":" 可能需要被迫在特定生命周期节点中运行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"具体可见 👉 "},{"type":"element","tag":"a","props":{"href":"https://staging-cn.vuejs.org/guide/scaling-up/ssr.html#access-to-platform-specific-apis","rel":["nofollow"]},"children":[{"type":"text","value":"SSR/访问平台特有 API"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"axios"}]},{"type":"text","value":" 兼容 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node"}]},{"type":"text","value":" 和浏览器双端的，所以你能够使用它进行请求。"}]},{"type":"element","tag":"code","props":{"code":"<script lang=\"ts\" setup>\nconst { data } = await axios.get('http://...') // 你的请求地址\n</script>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-05e7a8"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1be119"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":" axios."}]},{"type":"element","tag":"span","props":{"class":"ct-f6e776"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0ea9f4"},"children":[{"type":"text","value":"'http://...'"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-9818c3"},"children":[{"type":"text","value":"// 你的请求地址"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-345eaa"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-1155bc"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过还是推荐你使用内置请求方法。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-47aed4{color:#82071E}\n.ct-e9f46c{color:#953800}\n.ct-f6e776{color:#8250DF}\n.ct-1be119{color:#CF222E}\n.ct-9818c3{color:#6E7781}\n.ct-0ea9f4{color:#0A3069}\n.ct-05e7a8{color:#0550AE}\n.ct-345eaa{color:#116329}\n.ct-1155bc{color:#24292F}\n.dark .ct-1155bc{color:#C9D1D9}\n.dark .ct-345eaa{color:#7EE787}\n.dark .ct-05e7a8{color:#79C0FF}\n.dark .ct-0ea9f4{color:#A5D6FF}\n.dark .ct-9818c3{color:#8B949E}\n.dark .ct-1be119{color:#FF7B72}\n.dark .ct-f6e776{color:#D2A8FF}\n.dark .ct-e9f46c{color:#FFA657}\n.dark .ct-47aed4{color:#FFA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"基础","depth":2,"text":"基础","children":[{"id":"lazy","depth":3,"text":"lazy"}]},{"id":"注意","depth":2,"text":"注意"}]}},"_type":"markdown","_id":"content:4.nuxt3:2.features:5.data-fetch.md","_source":"content","_file":"4.nuxt3/2.features/5.data-fetch.md","_extension":"md"}