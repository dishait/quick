[{"_path":"/nuxt3/start/install","_dir":"start","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"安装","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"安装"},"children":[{"type":"text","value":"安装"}]},{"type":"element","tag":"h2","props":{"id":"基础"},"children":[{"type":"text","value":"基础"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":"，并补充以下信息 👇"}]}]},{"type":"element","tag":"code","props":{"code":"{\n    \"scripts\": {\n        \"dev\": \"nuxi dev\",\n        \"build\": \"nuxi build\",\n        \"start\": \"nuxi build && node .output/server/index.mjs\"\n    },\n    \"devDependencies\": {\n        \"nuxt\": \"^3.0.0\"\n    }\n}\n","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n    \"scripts\": {\n        \"dev\": \"nuxi dev\",\n        \"build\": \"nuxi build\",\n        \"start\": \"nuxi build && node .output/server/index.mjs\"\n    },\n    \"devDependencies\": {\n        \"nuxt\": \"^3.0.0\"\n    }\n}\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在根目录下创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"app.vue"}]}]}]},{"type":"element","tag":"code","props":{"code":"<!-- app.vue -->\n<template>\n    <div>Hello, World!!</div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- app.vue -->\n<template>\n    <div>Hello, World!!</div>\n</template>\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装依赖"}]}]},{"type":"element","tag":"code","props":{"code":"npm i\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm i\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动项目 (开发环境)"}]}]},{"type":"element","tag":"code","props":{"code":"npm run dev\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm run dev\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":5},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"打包项目"}]}]},{"type":"element","tag":"code","props":{"code":"npm run build\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm run build\n"}]}]}]},{"type":"element","tag":"ol","props":{"start":6},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"启动项目 (生产环境)"}]}]},{"type":"element","tag":"code","props":{"code":"npm run start\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm run start\n"}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"类型声明"},"children":[{"type":"text","value":"类型声明"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你想要开一个 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ts"}]},{"type":"text","value":" 项目"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"请在根目录下创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":"，并补充 👇"}]},{"type":"element","tag":"code","props":{"code":"{\n    \"extends\": \"./.nuxt/tsconfig.json\"\n}\n","language":"json"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n    \"extends\": \"./.nuxt/tsconfig.json\"\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了更好的类型提示，还需要在根目录下创建 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":"，并补充 👇"}]},{"type":"element","tag":"code","props":{"code":"import { defineNuxtConfig } from 'nuxt'\n\nexport default defineNuxtConfig({\n    typescript: {\n        shim: false\n    }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { defineNuxtConfig } from 'nuxt'\n\nexport default defineNuxtConfig({\n    typescript: {\n        shim: false\n    }\n})\n"}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"插件推荐"},"children":[{"type":"text","value":"插件推荐"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装以下插件可以让你在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"vscode"}]},{"type":"text","value":" 中有更友好的开发体验"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.volar","rel":["nofollow"]},"children":[{"type":"text","value":"Vue Language Features(Volar)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.vscode-typescript-vue-plugin","rel":["nofollow"]},"children":[{"type":"text","value":"TypeScript Vue Plugin(Volar)"}]}]}]}]},"_type":"markdown","_id":"content:2.nuxt3:1.start:2.install.md","_source":"content","_file":"2.nuxt3/1.start/2.install.md","_extension":"md"},{"_path":"/nuxt3/features/data-fetch","_dir":"features","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"数据获取","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"数据获取"},"children":[{"type":"text","value":"数据获取"}]},{"type":"element","tag":"h2","props":{"id":"基础"},"children":[{"type":"text","value":"基础"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt3"}]},{"type":"text","value":" 中内置了以下四种请求的方法"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\n// 参数一是 key\n// 参数二是请求 handler，返回请求的 promise\n// 解构出来的 data 为数据，error 为错误信息\nconst { data, error } = await useAsyncData('count', () => {\n    return new Promise(resolve => resolve('mock'))\n})\n</script>\n\n<template>\n    <div>\n        <div>data: {{ data }}</div>\n        <div>error: {{ error }}</div>\n    </div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<script setup lang=\"ts\">\n// 参数一是 key\n// 参数二是请求 handler，返回请求的 promise\n// 解构出来的 data 为数据，error 为错误信息\nconst { data, error } = await useAsyncData('count', () => {\n    return new Promise(resolve => resolve('mock'))\n})\n</script>\n\n<template>\n    <div>\n        <div>data: {{ data }}</div>\n        <div>error: {{ error }}</div>\n    </div>\n</template>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"内置的  "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 可以直接进行请求"}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\nconst { data, error } = await useAsyncData('count', () => {\n    return $fetch('http://...') // 请求地址\n})\n</script>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<script setup lang=\"ts\">\nconst { data, error } = await useAsyncData('count', () => {\n    return $fetch('http://...') // 请求地址\n})\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当然你可以用更简洁的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":"，它会在内部自动生成 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"code","props":{"code":"<script setup lang=\"ts\">\nconst { data, error } = await useFetch('http://...') // 你的请求地址\n</script>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<script setup lang=\"ts\">\nconst { data, error } = await useFetch('http://...') // 你的请求地址\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 会在内部自动使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"$fetch"}]},{"type":"text","value":" 作为请求方法，所以没有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" 灵活。"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"h3","props":{"id":"lazy"},"children":[{"type":"text","value":"lazy"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 和 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" 会阻塞导航的跳转。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":" 页面跳转到 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"home"}]},{"type":"text","value":" 页面"}]},{"type":"element","tag":"code","props":{"code":"<template>\n    <NuxtLink to=\"/home\"> to home</NuxtLink>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<template>\n    <NuxtLink to=\"/home\"> to home</NuxtLink>\n</template>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"home"}]},{"type":"text","value":" 页面有 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" 请求"}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n// 以下请求将会阻塞导航的跳转\nconst { data } = await useFetch('http://localhost:4000')\n</script>\n\n<template>\n    <div>{{ data }}</div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n// 以下请求将会阻塞导航的跳转\nconst { data } = await useFetch('http://localhost:4000')\n</script>\n\n<template>\n    <div>{{ data }}</div>\n</template>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而使用对应的 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"lazy"}]},{"type":"text","value":" 模式，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyFetch"}]},{"type":"text","value":" 或 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useLazyAsyncData"}]},{"type":"text","value":" 可以让导航跳转不被阻塞"}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n// 使用 useFetch 的 lazy 模式，不会阻塞导航跳转\nconst { data } = await useLazyFetch('http://localhost:4000')\n</script>\n\n<template>\n    <div>{{ data }}</div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n// 使用 useFetch 的 lazy 模式，不会阻塞导航跳转\nconst { data } = await useLazyFetch('http://localhost:4000')\n</script>\n\n<template>\n    <div>{{ data }}</div>\n</template>\n"}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"注意"},"children":[{"type":"text","value":"注意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"由于 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt3"}]},{"type":"text","value":" 默认是全 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SSR"}]},{"type":"text","value":" 的渲染模式，所以相同的业务代码会在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node"}]},{"type":"text","value":" 和浏览器都跑一遍。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这意味着大多数 "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"仅支持浏览器的请求库"}]},{"type":"text","value":" 可能需要被迫在特定生命周期节点中运行。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"具体可见 👉 "},{"type":"element","tag":"a","props":{"href":"https://staging-cn.vuejs.org/guide/scaling-up/ssr.html#access-to-platform-specific-apis","rel":["nofollow"]},"children":[{"type":"text","value":"SSR/访问平台特有 API"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"axios"}]},{"type":"text","value":" 兼容 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node"}]},{"type":"text","value":" 和浏览器双端的，所以你能够使用它进行请求。"}]},{"type":"element","tag":"code","props":{"code":"<script lang=\"ts\" setup>\nconst { data } = await axios.get('http://...') // 你的请求地址\n</script>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<script lang=\"ts\" setup>\nconst { data } = await axios.get('http://...') // 你的请求地址\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不过还是推荐你使用内置请求方法。"}]}]},"sidebarDepth":1,"_type":"markdown","_id":"content:2.nuxt3:2.features:data-fetch.md","_source":"content","_file":"2.nuxt3/2.features/data-fetch.md","_extension":"md"}]