{"_path":"/nuxt3/features/shared-state","_dir":"features","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"状态共享","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"状态共享"},"children":[{"type":"text","value":"状态共享"}]},{"type":"element","tag":"h2","props":{"id":"基础"},"children":[{"type":"text","value":"基础"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" 可以定义简单的共享状态"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"composables"}]},{"type":"text","value":" 中定义 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCounter"}]}]},{"type":"element","tag":"code","props":{"code":"// composables/useCounter.ts\n// composables 下模块的同名导出将被自动按需引入\nexport const useCounter = () => useState('counter', () => 100)\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// composables/useCounter.ts\n// composables 下模块的同名导出将被自动按需引入\nexport const useCounter = () => useState('counter', () => 100)\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" 的第一参数为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"，第二参数为初始化的工厂函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此时在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":" 页面中可以直接使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCounter"}]}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/index.vue -->\n<script lang=\"ts\" setup>\n    const conuter = useCounter() // 这是按需自动引入的\n</script>\n\n<template>\n    <div> <!-- 顶层的 div 包裹是必需的，不然跳转会丢失状态 -->\n        <div @click=\"conuter++\">{{ conuter }}</div>\n        <NuxtLink to=\"/home\">to home</NuxtLink>\n    </div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- pages/index.vue -->\n<script lang=\"ts\" setup>\n    const conuter = useCounter() // 这是按需自动引入的\n</script>\n\n<template>\n    <div> <!-- 顶层的 div 包裹是必需的，不然跳转会丢失状态 -->\n        <div @click=\"conuter++\">{{ conuter }}</div>\n        <NuxtLink to=\"/home\">to home</NuxtLink>\n    </div>\n</template>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"home"}]},{"type":"text","value":" 页面中也可以直接使用"}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n    const conuter = useCounter()\n</script>\n\n<template>\n    <div @click=\"conuter++\">{{ conuter }}</div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n    const conuter = useCounter()\n</script>\n\n<template>\n    <div @click=\"conuter++\">{{ conuter }}</div>\n</template>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你会发现两个页面的状态是共享的 👍"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"注意"},"children":[{"type":"text","value":"注意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" 只允许在生命周期中使用。"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"状态共享"},"children":[{"type":"text","value":"状态共享"}]},{"type":"element","tag":"h2","props":{"id":"基础"},"children":[{"type":"text","value":"基础"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" 可以定义简单的共享状态"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"composables"}]},{"type":"text","value":" 中定义 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCounter"}]}]},{"type":"element","tag":"code","props":{"code":"// composables/useCounter.ts\n// composables 下模块的同名导出将被自动按需引入\nexport const useCounter = () => useState('counter', () => 100)\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-af703c"},"children":[{"type":"text","value":"// composables/useCounter.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-af703c"},"children":[{"type":"text","value":"// composables 下模块的同名导出将被自动按需引入"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-521457"},"children":[{"type":"text","value":"useCounter"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-521457"},"children":[{"type":"text","value":"useState"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d920b2"},"children":[{"type":"text","value":"'counter'"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":", () "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" 的第一参数为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"，第二参数为初始化的工厂函数"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"此时在 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index"}]},{"type":"text","value":" 页面中可以直接使用 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCounter"}]}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/index.vue -->\n<script lang=\"ts\" setup>\n    const conuter = useCounter() // 这是按需自动引入的\n</script>\n\n<template>\n    <div> <!-- 顶层的 div 包裹是必需的，不然跳转会丢失状态 -->\n        <div @click=\"conuter++\">{{ conuter }}</div>\n        <NuxtLink to=\"/home\">to home</NuxtLink>\n    </div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-af703c"},"children":[{"type":"text","value":"<!-- pages/index.vue -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d920b2"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"conuter"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-521457"},"children":[{"type":"text","value":"useCounter"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-af703c"},"children":[{"type":"text","value":"// 这是按需自动引入的"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"class":"ct-af703c"},"children":[{"type":"text","value":"<!-- 顶层的 div 包裹是必需的，不然跳转会丢失状态 -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d920b2"},"children":[{"type":"text","value":"\"conuter++\""}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">{{ conuter }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"        <"}]},{"type":"element","tag":"span","props":{"class":"ct-754638"},"children":[{"type":"text","value":"NuxtLink"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d920b2"},"children":[{"type":"text","value":"\"/home\""}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">to home</"}]},{"type":"element","tag":"span","props":{"class":"ct-754638"},"children":[{"type":"text","value":"NuxtLink"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"    </"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"home"}]},{"type":"text","value":" 页面中也可以直接使用"}]},{"type":"element","tag":"code","props":{"code":"<!-- pages/home.vue -->\n<script lang=\"ts\" setup>\n    const conuter = useCounter()\n</script>\n\n<template>\n    <div @click=\"conuter++\">{{ conuter }}</div>\n</template>\n","language":"html"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-af703c"},"children":[{"type":"text","value":"<!-- pages/home.vue -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d920b2"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"conuter"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-06e6ef"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-521457"},"children":[{"type":"text","value":"useCounter"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-610b85"},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d920b2"},"children":[{"type":"text","value":"\"conuter++\""}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">{{ conuter }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-64741d"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-d4f89c"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"你会发现两个页面的状态是共享的 👍"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"注意"},"children":[{"type":"text","value":"注意"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useState"}]},{"type":"text","value":" 只允许在生命周期中使用。"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-754638{color:#82071E}\n.ct-64741d{color:#116329}\n.ct-610b85{color:#0550AE}\n.ct-d920b2{color:#0A3069}\n.ct-521457{color:#8250DF}\n.ct-d4f89c{color:#24292F}\n.ct-06e6ef{color:#CF222E}\n.ct-af703c{color:#6E7781}\n.dark .ct-af703c{color:#8B949E}\n.dark .ct-06e6ef{color:#FF7B72}\n.dark .ct-d4f89c{color:#C9D1D9}\n.dark .ct-521457{color:#D2A8FF}\n.dark .ct-d920b2{color:#A5D6FF}\n.dark .ct-610b85{color:#79C0FF}\n.dark .ct-64741d{color:#7EE787}\n.dark .ct-754638{color:#FFA198}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"基础","depth":2,"text":"基础"},{"id":"注意","depth":2,"text":"注意"}]}},"_type":"markdown","_id":"content:2.nuxt3:2.features:shared-state.md","_source":"content","_file":"2.nuxt3/2.features/shared-state.md","_extension":"md"}